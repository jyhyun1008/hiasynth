
# MOVEL

![아이콘](https://github.com/jyhyun1008/movel/raw/main/assets/icon.png)

> Markdown for Visual Novel

## 메인 컨셉

깃허브 페이지에서 쓴 **마크다운 문서**를 비주얼 노벨로 변환해 줍니다. 비주얼 노벨로 읽지 않고 마크다운 페이지에서 읽어도 불편함이 없도록 하는 것을 목표로 하고 있습니다.

# 설치 및 사용법

깃허브 페이지 또는 타 호스팅 서비스를 이용하실 수 있습니다.

## 깃허브 페이지로 사용하기

이 경우 `<아이디>.github.io` 에 접속하면 모블 페이지를 보실 수 있습니다. **깃허브 아이디를 비주얼 노벨 연재 목적으로만 개설하신 게 아니라면 별로 추천드리고 싶지 않습니다.**

1. 자신의 깃허브 저장소 중 `<아이디>.github.io` 라는 레포지토리가 **없는** 상태에서 시작합니다.
2. movel의 [깃허브 저장소](https://github.com/jyhyun1008/movel/)로 접속합니다.
3. 오른쪽 위의 초록색 버튼, [Use this template > Create a new repository](https://github.com/jyhyun1008/movel/generate) 를 클릭합니다.
4. `Repository name` 에 `<아이디>.github.io` 를 쓰고 `Create repository from template` 을 클릭합니다.
5. 생성된 저장소 메뉴 중 `settings` 로 들어가서, 왼쪽 사이드바에서 `pages` 를 클릭합니다.
6. `Branch` 부분을 보시면 `None` 으로 셋팅되어 있을 겁니다. 이걸 `main` 으로 바꾸고 `Save`를 클릭합니다.
7. 깃허브 저장소의 `page` 폴더에서 페이지를, `ep` 폴더에서 에피소드를 관리합니다. 공개할 에피소드는 `page/main.md` 페이지에 링크를 걸어 줍니다.

## 깃허브 페이지로 사용하기 (2차 주소)

이 경우 `<아이디>.github.io/<프로젝트 이름>` 에 접속하면 모블 페이지를 보실 수 있습니다. 저도 사용하고 있고, 가장 추천드리는 방법입니다.

1. 자신의 깃허브 페이지 `<아이디>.github.io` 가 배포되고 있는 상태에서 ([이 페이지](https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages) 참조) 시작합니다.
2. movel의 [깃허브 저장소](https://github.com/jyhyun1008/movel/)로 접속합니다.
3. 오른쪽 위의 초록색 버튼, [Use this template > Create a new repository](https://github.com/jyhyun1008/movel/generate) 를 클릭합니다.
4. `Repository name` 에 본인의 프로젝트 이름을 쓰고 `Create repository from template` 을 클릭합니다.
5. 생성된 저장소 메뉴 중 `settings` 로 들어가서, 왼쪽 사이드바에서 `pages` 를 클릭합니다.
6. `Branch` 부분을 보시면 `None` 으로 셋팅되어 있을 겁니다. 이걸 `main` 으로 바꾸고 `Save`를 클릭합니다.
7. 깃허브 저장소의 `page` 폴더에서 페이지를, `ep` 폴더에서 에피소드를 관리합니다. 공개할 에피소드는 `page/main.md` 페이지에 링크를 걸어 줍니다.

## 타 호스팅 서비스에서 사용하기 (깃허브 아이디가 있는 경우)

이 경우 해당 호스팅 서비스에서는 페이지만 띄워주고, 컨텐츠들은 모두 깃허브 저장소에서 관리됩니다. 깃허브 저장소에서 마크다운 파일의 수정을 쉽게 하실 수 있습니다.

1. 자신의 깃허브 아이디 `<아이디>` 가 있는 상태에서 시작합니다.
2. 프로젝트 이름으로 [깃허브 저장소를 생성](https://github.com/new)합니다. 이때 `Add a README file`을 체크해주면 `README.md` 파일이 생겨 있습니다. 이 파일은 여러분의 프로젝트를 소개하는 용도로 사용됩니다.
3. 저장소 내에서 `page/main.md`를 생성합니다. 이 이름으로 파일을 생성하면 폴더도 자동으로 생성됩니다. 내용은 비워두셔도 괜찮습니다. 이 파일은 메인 스토리의 목록을 보여주는 용도로 사용됩니다. `main` 대신 다른 이름을 사용하셔도 되고, 추천드리지는 않습니다만 한글을 사용하셔도 됩니다.
4. 저장소 내에서 `ep/<첫번째 에피소드 이름>.md`를 생성합니다. 
5. movel의 [깃허브 저장소](https://github.com/jyhyun1008/movel/)로 접속합니다.
6. 오른쪽 위의 `code` 버튼을 통해 로컬 폴더 내에 movel 저장소를 클론하거나, .zip 파일을 다운로드받아 압축 해제 합니다.
7. `settings.js` 파일을 입맛대로 수정합니다. 이때 `user`는 자신의 깃허브 아이디, `repo`는 (2)에서 생성한 저장소 이름으로 합니다.
8. 로컬 폴더 내의 `page` 폴더와 `ep` 폴더는 필요없으므로 삭제합니다.
9. 호스팅 서비스에 저장소 폴더를 업로드합니다. 그러면 `example.com/movel/` 로 접속하실 수 있습니다.
9. 깃허브 저장소의 `page` 폴더에서 페이지를, `ep` 폴더에서 에피소드를 관리합니다. 공개할 에피소드는 (3)에서 만든 `page/main.md` 페이지에 링크를 걸어 줍니다.

## 타 호스팅 서비스에서 사용하기 (깃허브 아이디가 없는 경우)

가능은 하지만 **세 번 이상의 `.js` 파일 수정이 필요한데다 마크다운 파일을 계속 따로 업로드해야 하므로 정말 추천드리지 않는 방법입니다.**

1. movel의 [깃허브 저장소](https://github.com/jyhyun1008/movel/)로 접속합니다.
2. 오른쪽 위의 `code` 버튼을 통해 로컬 폴더 내에 movel 저장소를 클론하거나, .zip 파일을 다운로드받아 압축 해제 합니다.
3. `settings.js` 파일을 입맛대로 수정합니다. 이때 `user`와 `repo`는 필요없으므로 지웁니다.
4. `js/player.js` 파일에서 42행 부근의 `https://raw.githubusercontent.com/"+user+"/"+repo+"/main` 부분을 `http://<호스팅 사이트 주소>/movel`로 치환합니다.
5. `js/mdparser.js` 파일에서 118행, 126행, 134행 부근의 `https://raw.githubusercontent.com/"+user+"/"+repo+"/main` 부분을 모두 `http://<호스팅 사이트 주소>/movel`로 치환합니다.
6. 호스팅 서비스에 저장소 폴더를 업로드합니다. 그러면 `example.com/movel/` 로 접속하실 수 있습니다.
7. `page` 폴더에서 페이지를, `ep` 폴더에서 에피소드를 관리합니다. 공개할 에피소드는 `page/main.md` 페이지에 링크를 걸어 줍니다.

# 기능

## 홈 화면에 추가

모바일(iOS는 사파리, 안드로이드는 크롬)로 MOVEL에 접속한 다음 아이콘을 홈 화면에 추가하면, 마치 어플리케이션을 실행하는 것처럼 MOVEL의 기능을 사용할 수 있습니다. 위의 주소창이나 여러 브라우저의 UI들이 사라지므로 조금 더 넓은 화면에서 비주얼 노벨을 감상할 수 있게 됩니다.

## 세로보기

MOVEL은 **세로보기**를 전제로 작업되고 있습니다. 스마트폰의 웹브라우저를 가지고 가로로 비주얼노벨을 플레이하는 것은 별도의 조작이 필요하기 때문에 번거롭습니다. 물론 반응형 인터페이스를 통해 데스크탑에서 플레이하더라도 어색해 보이지 않도록 만들고 있습니다.

## 마크다운 보기

왼쪽 위의 클립보드 아이콘을 누르면, **마크다운 문서 보기** 를 지원합니다. 비주얼 노벨을 플레이할 수 없는 상황에 있는 사람이나, 여태까지 봤던 **로그** 를 한번에 읽고 싶은 분들이 이용할 수 있습니다. 

# 구조

## 제목 및 부제목

아래와 같이 `#`, `##` 를 통해 변환할 비주얼 노벨의 제목 및 부제목을 설정할 수 있습니다. 제목을 설정할 때에는 **맨 첫 줄이더라도 꼭 한 줄 개행해 주세요.** 개행하지 않으면 제대로 인식되지 않습니다.

```

# 제목
## 부제목

```

## 옵션

아래와 같은 JSON 코드를 통해 각종 옵션들을 설정할 수 있습니다. 아무 옵션도 지정하지 않는다고 해서 디폴트 값이 사용되는 것은 아니니 유념해 주세요. ~~이미 옵션이 아니잖아~~ 옵션은 각 마크다운 문서별로 설정할 수 있습니다.

```
{
  balloon: "default",
  theme: "#7174F6",
  bg: {
    강당: "lecture_room",
    기숙사: "dorm"
  },
  bgm: {
    기본: "default"
  },
  sound: {
    문소리: "push"
  },
  effect: {
    흑백: "gray",
    세피아: "sepia",
    블러: "blur"
  },
  chr: {
    염구: "Ranqiu",
    재여: "Zaiyu"
  },
  chr_facial: {
    무표정: "none",
    웃음: "smile",
    크게웃음: "laugh"
  },
  chr_effect: {
    효과없음: "none",
    중앙이동: "moveToCenter",
    점프: "jump"
  }
}
```

### balloon

대사창의 모양을 결정합니다. 현재는 `default` 밖에 지원하지 않습니다.

### theme

테마 색상입니다.

### bg

배경 그림의 파일 이름을 지정할 수 있습니다.

### bgm, sound

배경 음악 및 효과음의 파일 이름을 지정할 수 있습니다.

### effect

배경 그림 및 캐릭터 그림에 적용되는 사진 필터입니다.

### chr

캐릭터의 이름 아래에 일러스트 파일이 저장된 폴더를 태그할 수 있습니다.

### chr_facial

각 캐릭터가 가지고 있는 감정 표현 세트입니다. 캐릭터 파일은 지정된 폴더 안에 `<캐릭터 이름>/<표정 이름>.png` 의 형식으로 저장되어 있어야 합니다. 이 세트는 캐릭터별로 지정할 수 없으니 참고해서 작업하시기 바랍니다.

### chr_effect

캐릭터의 동작이라든지 각종 효과를 적용할 수 있도록 되어 있습니다. "none" 으로 해 두면 아무 효과도 적용되지 않습니다. 현재 다음과 같은 여섯 가지의 캐릭터 효과를 적용할 수 있습니다.

* `moveToCenter`: 캐릭터가 중앙 위치로 이동합니다. 당연하지만, 화면에 캐릭터 하나만 있는 경우 캐릭터가 자동으로 중앙에 배치되므로 사용해도 의미가 없습니다.
* `moveToLeft`: 캐릭터가 원래 위치에서 왼쪽 끝으로 이동해서 사라집니다.
* `moveToRight`: 캐릭터가 원래 위치에서 오른쪽 끝으로 이동해서 사라집니다.
* `passToLeft`: 캐릭터가 오른쪽 끝에서 왼쪽 끝으로 지나갑니다.
* `passToRight`: 캐릭터가 왼쪽 끝에서 오른쪽 끝으로 지나갑니다.
* `jump`: 캐릭터가 원래 위치에서 한 번 점프합니다.

## 페이지 구분

```
---
```
을 통해 한 화면에 보이는 페이지를 구분할 수 있습니다. 만약 페이지를 구분하지 않는다면, **가장 아래쪽에 설정하신 내용만이 반영된 채 나타납니다.**


## 태그 설정

태그를 통해 모든 멀티미디어 요소, 즉 배경 그림, 배경음악, 효과음 및 캐릭터를 설정할 수 있습니다. 

태그에는 총 두 종류가 있습니다. 첫번째는 마크다운 문서에 접근하는 유저들에게도 보이는 부분으로, 태그가 변경되었음을 알리는 `&#96;property=value&#96;` 태그, 두번째는 유저들에게는 보이지 않는 부분으로, 이전 페이지의 태그를 다음 페이지에도 유지하겠다는 의미의 `&lt;!--주석--&gt;` 태그입니다. (효과음은 유지할 수 없습니다.)

### 화면에 나타나는 배경 그림, 배경음악, 캐릭터를 바꾸고, 효과음을 넣고 싶을 때

```
&#96;bgm=default&#96; &#96;bg=lecture_room&#96; &#96;sound=push&#96;
```

각 태그 사이사이를 제외한 문자열에 띄어쓰기를 넣지 말아주세요.

캐릭터의 경우, 따로 `=`으로 구분하지 않고 캐릭터의 이름을 그대로 태그합니다. 대신, 표정과 캐릭터 효과를 함께 태그합니다. 표정이 없으면 이미지 파일 로드 자체가 되지 않고, 캐릭터 효과도 마찬가지입니다. 캐릭터 효과가 없을 경우 '효과없음'으로 꼭 지정해주세요.

```
&#96;재여; 무표정; 효과없음&#96;
```

이 경우에는 각 옵션 사이에 공백을 넣습니다.

### 이전 화면에 나타나는 배경 그림, 배경음악, 캐릭터를 이번 페이지에도 유지하고 싶을 때

```
&lt;!--bgm--&gt; &lt;!--bg--&gt; &lt;!--chr--&gt;
```

각 태그 사이사이를 제외한 문자열에 공백을 넣지 말아주세요.

만약 캐릭터의 표정이나 효과 등이 바뀐다면 `&#96;property=value&#96;` 태그를 다시 사용하여 지정해 주셔야 합니다.

## 시간, 장소

```
### 시간 또는 장소
```

## 대사창

```
### 인물 이름
> 대사 1
> 대사 2
> 대사 3
```

대사는 총 세 줄까지 입력 가능합니다.

# 파일 형식

파비콘, 앱 이미지를 제외한 커스텀 파일은 `./assets` 에 저장합니다. 모든 이미지는 `.png`형식으로, 모든 오디오는 `.mp3` 형식으로 업로드 또는 저장해주세요.

## 배경

`./assets/bg` 폴더에 저장합시다. 어떤 사이즈든 가능합니다만 가로/세로모드 양쪽에 대응할 수 있도록 충분히 높은 해상도의 파일을 추천드립니다.

## 캐릭터

`./assets/chr` 폴더에 각 캐릭터별 폴더를 만듭니다. 이 폴더 안에 `<캐릭터 이름>/<표정 이름>.png` 의 형식으로 저장되어 있어야 합니다. 1:2 비율, 가로 400px 이상의 전신 일러스트를 추천드립니다. 

# 예시

[ep/test.md](./index.html?raw=test)에 저장되어 있습니다.
